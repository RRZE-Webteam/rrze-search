jQuery(document).ready(function(a){var n,i,d,l,c,s=document.getElementById("search-header"),o=document.getElementById("search-panel"),h=document.getElementById("search-toggle"),e=document.getElementById("headsearchinput"),r=a("body");function g(){e.blur(),setTimeout(t)}function u(e){(e=ally.query.firstTabbable({context:e,defaultToContext:!0}))&&e.focus()}function t(){h._toggleSearch(!1)}h._toggleSearch=function(e,t){e!==this._expanded&&(this._expanded=e,this._source=this._expanded&&t||0,r.toggleClass("search-toggled",this._expanded),this.setAttribute("aria-expanded",this._expanded?"true":"false"),this._expanded?(ally.when.visibleArea({context:s,callback:u||null}),d=ally.maintain.disabled({filter:[s,h,c]}),l=ally.maintain.hidden({filter:s}),i=ally.maintain.tabFocus({context:s}),n=ally.when.key({escape:g}),a(o).prop("hidden",!1)):(n.disengage(),i.disengage(),l.disengage(),d.disengage(),a(o).prop("hidden",!0)))},a(e).click(function(){h._toggleSearch(!0,1)}).keyup(function(e){[9,16].indexOf(e.which)<0&&((e=a(this).val().length)&&!h._expanded?h._toggleSearch(!0,2):!e&&h._expanded&&2===h._source&&t())}),a(s).submit(t),a(".search-engine").click(function(){$this=a(this),$this.closest("[role=radiogroup]").find("[tabindex]").attr("tabindex",-1),$this.closest("label").find("a").add(this).attr("tabindex",this.checked?1:-1)});var p=a('<div id="search-backdrop"/>').click(t);a("#meta").before(p),c=p[0]});